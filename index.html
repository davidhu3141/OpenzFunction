
<html>

<head>

	<meta http-equiv="content-type" content="text/html" charset="utf-8" />

	<!-- icon -->
	<!-- link rel="shortcut icon" href="https://davidhu3141.github.io/anthology/img/pageicon.png" -->

	<!-- mathjax -->
	<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>

	<!-- jquery -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>

	<!-- highloghtjs -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/default.min.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
	<script>hljs.initHighlightingOnLoad();</script>

	<!-- custom css/js -->
	<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700' rel='stylesheet' type='text/css'>
	<link rel=stylesheet type="text/css" href="css/article.css">
	<link rel=stylesheet type="text/css" href="css/anthology.css">

	<!-- d3 -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>
	<script src="geo.js"></script>

	<script type = "text/javascript">
		
		var canvas;
		var context;
		
		function f(x, y){
			var expression = $("#func").val();
			expression.replace(/x/g, x);
			expression.replace(/y/g, y);
			console.log(expression);
			var value = eval(expression);
			value = value > 0 ? value : 0;
			return value;
		}
		
		var cx = 300;
		var cy = 200;
		var ck = 50;
		
		function exec(){

			var xlb = parseInt($("#xlb").val());
			var xub = parseInt($("#xub").val());
			var xs = parseInt($("#xs").val());
			if(xs <= 0){
				alert("Invalid X-slice number");
				return;
			}
			var xd = (xub-xlb)/xs;

			var ylb = parseInt($("#ylb").val());
			var yub = parseInt($("#yub").val());
			var ys = parseInt($("#ys").val());
			if(ys <= 0){
				alert("Invalid Y-slice number");
				return;
			}
			var yd = (yub-ylb)/ys;

console.log(xd);
console.log(yd);

			for(var i=xlb; i<xub; i+=xd){
				for(var j=ylb; j<yub; j+=yd){

					geo.points[0][0] = i;
					geo.points[0][1] = j;
					geo.points[1][0] = (i + xd);
					geo.points[1][1] = j;
					geo.points[2][0] = (i + xd);
					geo.points[2][1] = (j + yd);
					geo.points[3][0] = i;
					geo.points[3][1] = (j + yd);

					geo.initLines(f);
					segments = geo.drawVirtual();
					
					d3.select(".datavis")
						.append("svg")
						.attr("width", ck*(segments.maxx-segments.minx))
						.attr("height", ck*(segments.maxy-segments.miny))
						.style("margin", "5px 5px 5px 5px")
						.append("g")
						.attr("id", "net"+Math.floor(i*100)+"_"+Math.floor(j*100))
						.selectAll("#net"+Math.floor(i*100)+"_"+Math.floor(j*100))
						.data(segments)
						.enter()
						.append("line")
						.attr("x1", function(d){ return ck*(d.x1-segments.minx) })
						.attr("y1", function(d){ return ck*(d.y1-segments.miny) })
						.attr("x2", function(d){ return ck*(d.x2-segments.minx) })
						.attr("y2", function(d){ return ck*(d.y2-segments.miny) })
						.style("stroke-width", 1)
						.style("stroke", "rgb(0, 0, 0)");
				}
			}
		}

		$().ready(function(){

			$("#net").click(function(){
				exec();
			});

			$("#clr").click(function(){
				$(".datavis").html("");
			});

		});
		
	</script>

</head>

<body>

<div class="master">

	<div class="mid_warpper">		

		<div class="content">
			<div class="article">

<h2 id="openzfunction">OpenzFunction</h2>

<h3 id="purpose">Purpose</h3>

<p>To make model of some z-simple solid that is bound above by a surface <script type="math/tex" id="MathJax-Element-5">z=f(x,y)</script> and below by the x-y plane, we can divide the target into pieces and approximate the pieces by polyhedron.</p>

<p><img src="https://i.imgur.com/XnkHQ4n.jpg" alt="" title=""></p>

<p>This page plots the net of such polyhedron of a specified surface so that you could make the model. </p>

<h3 id="input">Input</h3>

<h4 id="function">Function</h4>

<!-- FORM -->
<p>The function <script type="math/tex" id="MathJax-Element-23">z=f(x,y)=</script> <input style="width:25%;" id="func"> . </p>

<blockquote>
<p><em>Notice: The program recognize your function by javascript</em> <code>eval()</code> <em>, so it's better to write power as</em> <code>Math.pow(2, x)</code> <em>rather than</em> <code>2^x</code> <em>.</em> </p>

<p><em>Hence the functions</em> <code>Math.sin()</code> , <code>Math.cos()</code> <em>…etc are all available.</em></p>

<p><em>Don’t use</em> <code>eval()</code> <em>to do evil things, and don’t enter sensitive data, too.</em></p>
</blockquote>


<h4 id="range">Range</h4>

<!-- FORM -->
<p>X ranges from <input style="width:50px;" id="xlb"> to <input style="width:50px;" id="xub">. <br>
Y ranges from <input style="width:50px;" id="ylb"> to <input style="width:50px;" id="yub">.</p>

<!-- FORM -->
<p><input style="width:50px;" id="xs"> slices in X direction. <br>
<input style="width:50px;" id="ys"> slices in Y direction.</p>

<h3 id="preview">Preview</h3>

<!-- FORM -->
<p>
<button type="button">Generate Preview</button>
</p>
<p>
<button type="button" id="net">Generate Net</button>
</p>
<p>
<button type="button" id="clr">Clear Results</button>
</p>
<p>
Use <code>Ctrl+V</code> to print result directly.
</p>

			</div>

			<div class="datavis">
			</div>

		</div>

	</div>

	<div class="footer">
		<p> <em> Any suggestion is welcome! Please mail: davidhu8888@livemail.tw</em> </p>
	</div>

</div>

</body>

</html>
